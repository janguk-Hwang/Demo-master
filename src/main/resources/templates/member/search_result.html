<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>검색 결과 페이지</title>
    <link rel="shortcut icon" type="image/x-icon" href="/Logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        :root {
            --background: #9c88ff;
            --navbar-width: 256px;
            --navbar-width-min: 80px;
            --navbar-dark-primary: #18283b;
            --navbar-dark-secondary: #2c3e50;
            --navbar-light-primary: #f5f6fa;
            --navbar-light-secondary: #8392a5;
        }
        #nav-toggle:checked ~ #nav-header {
            width: calc(var(--navbar-width-min) - 16px);
        }
        #nav-toggle:checked ~ #nav-content, #nav-toggle:checked ~ #nav-footer {
            width: var(--navbar-width-min);
        }
        #nav-toggle:checked ~ #nav-header #nav-title {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.1s;
        }
        #nav-toggle:checked ~ #nav-header label[for=nav-toggle] {
            left: calc(50% - 8px);
            transform: translate(-50%);
        }
        #nav-toggle:checked ~ #nav-header #nav-toggle-burger {
            background: var(--navbar-light-primary);
        }
        #nav-toggle:checked ~ #nav-header #nav-toggle-burger:before, #nav-toggle:checked ~ #nav-header #nav-toggle-burger::after {
            width: 16px;
            background: var(--navbar-light-secondary);
            transform: translate(0, 0) rotate(0deg);
        }
        #nav-toggle:checked ~ #nav-content .nav-button span {
            opacity: 0;
            transition: opacity 0.1s;
        }
        #nav-toggle:checked ~ #nav-content .nav-button .fas {
            min-width: calc(100% - 16px);
        }
        #nav-toggle:checked ~ #nav-footer #nav-footer-avatar {
            margin-left: 0;
            left: 50%;
            transform: translate(-50%);
        }
        #nav-toggle:checked ~ #nav-footer #nav-footer-titlebox, #nav-toggle:checked ~ #nav-footer label[for=nav-footer-toggle] {
            opacity: 0;
            transition: opacity 0.1s;
            pointer-events: none;
        }
        #nav-bar {
            position: absolute;
            left: 1vw;
            top: 1vw;
            height: calc(100% - 2vw);
            background: var(--navbar-dark-primary);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            color: var(--navbar-light-primary);
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            overflow: hidden;
            user-select: none;
        }
        #nav-bar hr {
            margin: 0;
            position: relative;
            left: 16px;
            width: calc(100% - 32px);
            border: none;
            border-top: solid 1px var(--navbar-dark-secondary);
        }
        #nav-bar a {
            color: inherit;
            text-decoration: inherit;
        }
        #nav-bar input[type=checkbox] {
            display: none;
        }
        #nav-header {
            position: relative;
            width: var(--navbar-width);
            left: 16px;
            width: calc(var(--navbar-width) - 16px);
            min-height: 80px;
            background: var(--navbar-dark-primary);
            border-radius: 16px;
            z-index: 2;
            display: flex;
            align-items: center;
            transition: width 0.2s;
        }
        #nav-header hr {
            position: absolute;
            bottom: 0;
        }
        #nav-title {
            font-size: 1.5rem;
            transition: opacity 1s;
        }
        label[for=nav-toggle] {
            position: absolute;
            right: 0;
            width: 3rem;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        #nav-toggle-burger {
            position: relative;
            width: 16px;
            height: 2px;
            background: var(--navbar-dark-primary);
            border-radius: 99px;
            transition: background 0.2s;
        }
        #nav-toggle-burger:before, #nav-toggle-burger:after {
            content: "";
            position: absolute;
            top: -6px;
            width: 10px;
            height: 2px;
            background: var(--navbar-light-primary);
            border-radius: 99px;
            transform: translate(2px, 8px) rotate(30deg);
            transition: 0.2s;
        }
        #nav-toggle-burger:after {
            top: 6px;
            transform: translate(2px, -8px) rotate(-30deg);
        }
        #nav-content {
            margin: -16px 0;
            padding: 16px 0;
            position: relative;
            flex: 1;
            width: var(--navbar-width);
            background: var(--navbar-dark-primary);
            box-shadow: 0 0 0 16px var(--navbar-dark-primary);
            direction: rtl;
            overflow-x: hidden;
            transition: width 0.2s;
        }
        #nav-content::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        #nav-content::-webkit-scrollbar-thumb {
            border-radius: 99px;
            background-color: #D62929;
        }
        #nav-content::-webkit-scrollbar-button {
            height: 16px;
        }
        #nav-content-highlight {
            position: absolute;
            left: 16px;
            top: -70px;
            width: calc(100% - 16px);
            height: 54px;
            background: var(--background);
            background-attachment: fixed;
            border-radius: 16px 0 0 16px;
            transition: top 0.2s;
        }
        #nav-content-highlight:before, #nav-content-highlight:after {
            content: "";
            position: absolute;
            right: 0;
            bottom: 100%;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            box-shadow: 16px 16px var(--background);
        }
        #nav-content-highlight:after {
            top: 100%;
            box-shadow: 16px -16px var(--background);
        }
        .nav-button {
            position: relative;
            margin-left: 16px;
            height: 54px;
            display: flex;
            align-items: center;
            color: var(--navbar-light-secondary);
            direction: ltr;
            cursor: pointer;
            z-index: 1;
            transition: color 0.2s;
        }
        .nav-button span {
            transition: opacity 1s;
        }
        .nav-button .fas {
            transition: min-width 0.2s;
        }
        .nav-button:nth-of-type(1):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(1):hover ~ #nav-content-highlight {
            top: 16px;
        }
        .nav-button:nth-of-type(2):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(2):hover ~ #nav-content-highlight {
            top: 70px;
        }
        .nav-button:nth-of-type(3):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(3):hover ~ #nav-content-highlight {
            top: 124px;
        }
        .nav-button:nth-of-type(4):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(4):hover ~ #nav-content-highlight {
            top: 178px;
        }
        .nav-button:nth-of-type(5):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(5):hover ~ #nav-content-highlight {
            top: 232px;
        }
        .nav-button:nth-of-type(6):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(6):hover ~ #nav-content-highlight {
            top: 286px;
        }
        .nav-button:nth-of-type(7):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(7):hover ~ #nav-content-highlight {
            top: 340px;
        }
        .nav-button:nth-of-type(8):hover {
            color: var(--navbar-dark-primary);
        }
        .nav-button:nth-of-type(8):hover ~ #nav-content-highlight {
            top: 394px;
        }
        #nav-bar .fas {
            min-width: 3rem;
            text-align: center;
        }
        #nav-footer {
            position: relative;
            width: var(--navbar-width);
            height: 54px;
            background: var(--navbar-dark-secondary);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            z-index: 2;
            transition: width 0.2s, height 0.2s;
        }
        #nav-footer-heading {
            position: relative;
            width: 100%;
            height: 54px;
            display: flex;
            align-items: center;
        }
        #nav-footer-avatar {
            position: relative;
            margin: 11px 0 11px 16px;
            left: 0;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            overflow: hidden;
            transform: translate(0);
            transition: 0.2s;
        }
        #nav-footer-avatar img {
            height: 100%;
        }
        #nav-footer-titlebox {
            position: relative;
            margin-left: 16px;
            width: 10px;
            display: flex;
            flex-direction: column;
            transition: opacity 1s;
        }
        #nav-footer-subtitle {
            color: var(--navbar-light-secondary);
            font-size: 0.6rem;
        }
        #nav-toggle:not(:checked) ~ #nav-footer-toggle:checked + #nav-footer {
            height: 30%;
            min-height: 54px;
        }
        #nav-toggle:not(:checked) ~ #nav-footer-toggle:checked + #nav-footer label[for=nav-footer-toggle] {
            transform: rotate(180deg);
        }
        label[for=nav-footer-toggle] {
            position: absolute;
            right: 0;
            width: 3rem;
            height: 100%;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s, opacity 0.2s;
        }
        #nav-footer-content {
            margin: 0 16px 16px 16px;
            border-top: solid 1px var(--navbar-light-secondary);
            padding: 16px 0;
            color: var(--navbar-light-secondary);
            font-size: 0.8rem;
            overflow: auto;
        }
        #nav-footer-content::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        #nav-footer-content::-webkit-scrollbar-thumb {
            border-radius: 99px;
            background-color: #D62929;
        }
    </style>
    <style>
        .grid-container {
            display: flex;
            align-content: center;
            align-items: center;
            gap: 10px;
            padding: 10px;
        }
        .grid-container > div{
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0px;
            border-radius: 20px;
            background-color: #f2f2f2;
            text-align: justify;
            padding: 0 10px;
            font-family: "Lato",sans-serif;
            font-size: 20px;
        }
        #chart1 {
            width: 80%;
            height: 350px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 20px;
            box-sizing: border-box;
        }
        #chart2 {
            width: 80%;
            height: 350px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 20px;
            box-sizing: border-box;
        }
        .card {
            background: #fff;
            border-radius: 2px;
            display: inline-block;
            height: 300px;
            position: relative;
            width: 100%;
            margin-left: 200px;
        }
        .card-4 {
            box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
        }
        hr.hr-1 {
            border: 0;
            height: 1px;
            background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));
        }
        body {
            background: #f2f2f2;
        }
        p {
            font-family: 'Lato', sans-serif;
            font-weight: 300;
            text-align: center;
            font-size: 18px;
            color: #676767;
        }
        button {
            margin: 20px;
        }
        .custom-btn {
            width: 160px;
            height: 40px;
            color: #fff;
            border-radius: 10px;
            padding: 10px 25px;
            font-family: '한컴 말랑말랑 Regular', sans-serif;
            font-size: 16px;
            font-weight: 900;
            font-style: normal;
            text-shadow: 0px -1px 0px rgba(0,0,0,0.4);
            text-decoration: none;
            background: transparent;
            cursor: pointer;
            position: relative;
            display: inline-block;
            box-shadow: inset 0px 1px 0px rgba(255,255,255,1),0px 1px 3px rgba(0,0,0,0.3);
            outline: none;
            border: 1px solid #ba6;
        }
        .custom-btn:active{
            -webkit-transform: translateY(2px);
            transform: translateY(2px);
        }
        /* 7 */
        .btn-7{
            border-color: #7c7c7c;
            background: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0.25)), to(#e6e6e6));
        }
        body {
            text-align: center;
            flex-flow: wrap;
            font-size: 18px;
            font-family: 'Titillium Web', sans-serif;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script th:inline="javascript">
        var myChart1;
        var myChart2;

        function pageUrl() {
            var sHref = decodeURI(location.href);
            return sHref;
        }

        window.addEventListener('resize', function() {
            myChart1.resize();
            myChart2.resize();
        });

        window.onload = function() {
            document.getElementById("drawLine").addEventListener('click', function() {
                drawChart1('line');
                drawChart2('line');
            });
            document.getElementById("drawBar").addEventListener('click', function() {
                drawChart1('bar');
                drawChart2('bar');
            });

            drawChart1('line');
            drawChart2('line');
        };

        function drawChart1(type) {
            myChart1 = echarts.init(document.getElementById('chart1'));

            var xAxisData = [[${xAxisData}]];
            let seriesData1 = [[${seriesData1}]];
            let seriesData2 = [];
            let seriesData3 = [];
            let seriesData4 = [];
            let seriesData5 = [];

            if ([[${query2}]]!="") {
                seriesData2 = [[${seriesData2}]];
            }

            if ([[${query3}]]!="") {
                seriesData3 = [[${seriesData3}]];
            }

            if ([[${query4}]]!="") {
                seriesData4 = [[${seriesData4}]];
            }

            if ([[${query5}]]!="") {
                seriesData5 = [[${seriesData5}]];
            }

            let legendData = []; // 범례 데이터를 동적으로 저장할 배열

            if ([[${query1}]] !== "") {
                legendData.push('[[${query1}]]');
            }
            if ([[${query2}]]!="") {
                legendData.push('[[${query2}]]');
            }
            if ([[${query3}]]!="") {
                legendData.push('[[${query3}]]');
            }
            if ([[${query4}]]!="") {
                legendData.push('[[${query4}]]');
            }
            if ([[${query5}]]!="") {
                legendData.push('[[${query5}]]');
            }

            let option = {
                tooltip: {
                    trigger: 'item',
                    position: function (point, params, dom, rect, size) {
                        var x = 150; // x 좌표 조절
                        var y = 50; // y 좌표 조절
                        console.log(point[0])
                        if(point[0]<510){
                            return [point[0], point[1] - y];
                        } else if (point[0]>510){
                            return [point[0]-x, point[1] - y];
                        }
                    }
                },
                grid: {
                    left: '1%',
                    right: '4%',
                    bottom: '10%',
                    top: '10%',
                    containLabel: true
                },
                legend: {
                    data: legendData
                },
                xAxis: {
                    type: 'category',
                    data: xAxisData
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: '[[${query1}]]',
                        data: seriesData1,
                        type: type,
                        color: 'rgb(255, 0, 0)'
                    },
                    {
                        name: '[[${query2}]]',
                        data: seriesData2,
                        type: type,
                        color: 'rgb(200, 200, 0)'
                    },
                    {
                        name: '[[${query3}]]',
                        data: seriesData3,
                        type: type,
                        color: 'rgb(0, 200, 200)'
                    },
                    {
                        name: '[[${query4}]]',
                        data: seriesData4,
                        type: type,
                        color: 'rgb(0, 100, 235)'
                    },
                    {
                        name: '[[${query5}]]',
                        data: seriesData5,
                        type: type,
                        color: 'rgb(200, 200, 255)'
                    }
                ],
                label: {
                    show: false,
                    position: 'top',
                }
            };
            myChart1.setOption(option);
        }

        function drawChart2(type) {
            myChart2 = echarts.init(document.getElementById('chart2'));

            var xAxisData = [[${xAxis2Data}]];
            let seriesData1 = [[${series2Data1}]];
            let seriesData2 = [];
            let seriesData3 = [];
            let seriesData4 = [];
            let seriesData5 = [];

            if ([[${query2}]]!="") {
                seriesData2 = [[${series2Data2}]];
            }

            if ([[${query3}]]!="") {
                seriesData3 = [[${series2Data3}]];
            }

            if ([[${query4}]]!="") {
                seriesData4 = [[${series2Data4}]];
            }

            if ([[${query5}]]!="") {
                seriesData5 = [[${series2Data5}]];
            }

            let legendData = []; // 범례 데이터를 동적으로 저장할 배열

            if ([[${query1}]] !== "") {
                legendData.push('[[${query1}]]');
            }
            if ([[${query2}]]!="") {
                legendData.push('[[${query2}]]');
            }
            if ([[${query3}]]!="") {
                legendData.push('[[${query3}]]');
            }
            if ([[${query4}]]!="") {
                legendData.push('[[${query4}]]');
            }
            if ([[${query5}]]!="") {
                legendData.push('[[${query5}]]');
            }

            let option = {
                tooltip: {
                    trigger: 'item',
                    position: function (point, params, dom, rect, size) {
                        var x = 150; // x 좌표 조절
                        var y = 50; // y 좌표 조절
                        console.log(point[0])
                        if(point[0]<510){
                            return [point[0], point[1] - y];
                        } else if (point[0]>510){
                            return [point[0]-x, point[1] - y];
                        }
                    }
                },
                grid: {
                    left: '1%',
                    right: '4%',
                    bottom: '10%',
                    top: '10%',
                    containLabel: true
                },
                legend: {
                    data: legendData
                },
                xAxis: {
                    type: 'category',
                    data: xAxisData
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: '[[${query1}]]',
                        data: seriesData1,
                        type: type,
                        color: 'rgb(255, 0, 0)'
                    },
                    {
                        name: '[[${query2}]]',
                        data: seriesData2,
                        type: type,
                        color: 'rgb(200, 200, 0)'
                    },
                    {
                        name: '[[${query3}]]',
                        data: seriesData3,
                        type: type,
                        color: 'rgb(0, 200, 200)'
                    },
                    {
                        name: '[[${query4}]]',
                        data: seriesData4,
                        type: type,
                        color: 'rgb(0, 100, 235)'
                    },
                    {
                        name: '[[${query5}]]',
                        data: seriesData5,
                        type: type,
                        color: 'rgb(200, 200, 255)'
                    }
                ],
                label: {
                    show: false,
                    position: 'top',
                }
            };
            myChart2.setOption(option);
        }
    </script>
    <script>
        function logout() {
            alert('로그아웃되었습니다.');
            window.location.href = '/member/logout';
        }
    </script>
</head>
<body>
<a href="/index_result" target="_blank">
    <img src="/Logo.png" alt="Leto 데이터랩 로고" height="146" width="255">
</a>
<div id="nav-bar">
    <input id="nav-toggle" type="checkbox"/>
    <div id="nav-header"><a id="nav-title" href="/index_result" target="_blank"><i class="fab fa-codepen"></i>LETO Trends</a>
        <label for="nav-toggle"><span id="nav-toggle-burger"></span></label>
        <hr/>
    </div>
    <div id="nav-content">
        <div class="nav-button" onclick="logout()">
            <i class="fas fas fa-palette"></i><span>logout</span>
        </div>
        <div class="nav-button"><i class="fas fa-images"></i><span>Assets</span></div>
        <div class="nav-button"><i class="fas fa-thumbtack"></i><span>Pinned Items</span></div>
        <hr/>
        <div class="nav-button"><i class="fas fa-heart"></i><span>Following</span></div>
        <div class="nav-button"><i class="fas fa-chart-line"></i><span>Trending</span></div>
        <div class="nav-button"><i class="fas fa-fire"></i><span>Challenges</span></div>
        <div class="nav-button"><i class="fas fa-magic"></i><span>Spark</span></div>
        <hr/>
        <div class="nav-button"><i class="fas fa-gem"></i><span>Codepen Pro</span></div>
        <div id="nav-content-highlight"></div>
    </div>
    <input id="nav-footer-toggle" type="checkbox"/>
    <div id="nav-footer">
        <div id="nav-footer-heading">
            <div id="nav-footer-avatar"><img src="https://gravatar.com/avatar/4474ca42d303761c2901fa819c4f2547"/></div>
            <div id="nav-footer-titlebox"><a id="nav-footer-title" href="https://codepen.io/uahnbu/pens/public" target="_blank">UserName</a><span id="nav-footer-subtitle">User</span></div>
            <label for="nav-footer-toggle"><i class="fas fa-caret-up"></i></label>
        </div>
        <div id="nav-footer-content">
            <Lorem>ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</Lorem>
        </div>
    </div>
</div>
<div class="grid-container">
    <div>
        <a>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</a>
        <button class="custom-btn btn-7" id="drawLine" value="line">Line Chart</button>
        <button class="custom-btn btn-7" id="drawBar" value="bar">Bar Chart</button>
        <button class="custom-btn btn-7" onclick="window.location.href='/index_result'">검색화면으로</button>
        <form action="/member/search_result" method="post">
                <input type="hidden" name="url" id="urlInput" value="">
                <script th:inline="javascript">
                    if (pageUrl()!="http://localhost:8080/member/search_result"&&pageUrl()!=[[${url1}]]&&pageUrl()!=[[${url2}]]&&pageUrl()!=[[${url3}]]&&pageUrl()!=[[${url4}]]) {
                        document.getElementById('urlInput').value = pageUrl();
                    }
                </script>
                <button class="btn" type="submit">즐겨찾기 추가</button>
        </form>
    </div>
</div>
<div class="card card-4" id="chart1"></div>
<div class="card card-4" id="chart2"></div>
</body>
</html>